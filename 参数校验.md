#### 1.入参校验

```java
package com.wzw.store.aop;import com.alibaba.fastjson.JSON;import org.aspectj.lang.ProceedingJoinPoint;import org.aspectj.lang.annotation.Around;import org.aspectj.lang.annotation.Aspect;import org.aspectj.lang.annotation.Pointcut;import org.aspectj.lang.reflect.MethodSignature;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.stereotype.Component;import java.util.HashMap;import java.util.Map;/** * @author wzw * @date 2019-11-4 14:03 */@Aspect@Componentpublic class MyArgumentAspect {    private Logger logger = LoggerFactory.getLogger(this.getClass());    @Pointcut("execution(* com.wzw..*Controller.*(..))")    public void point() {    }    @Around("point()")    public Object getArguments(ProceedingJoinPoint pjp) throws Throwable{            String className = pjp.getTarget().getClass().getSimpleName();            String methodName = pjp.getSignature().getName();            Map<String, Object> hashMap;            hashMap = getIntoArguments(pjp);            logger.info("类名【"+className+"】方法名【"+methodName+"】参数{}",JSON.toJSONString(hashMap));            return pjp.proceed();            //RestController annotation = pjp.getTarget().getClass().getAnnotation(RestController.class);            //if (null !=  annotation) {                //记录入参            //}    }    public Map<String,Object> getIntoArguments(ProceedingJoinPoint pjp){        MethodSignature methodSignature = (MethodSignature) pjp.getSignature();        //获取参数名        String[] parameterNames = methodSignature.getParameterNames();        //获取参数        Object[] argumentArgs = pjp.getArgs();        Map<String, Object> hashMap = new HashMap<>(16);        for (int i = 0; i < parameterNames.length; i++) {            hashMap.put(parameterNames[i],argumentArgs[i]);        }        return hashMap;    }}
```

#### 2.全局异常捕获

```java
package com.wzw.store;import com.wzw.store.responDataUtils.ResponseData;import com.wzw.store.responDataUtils.ResponseDataBuilder;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.http.converter.HttpMessageConversionException;import org.springframework.http.converter.HttpMessageNotReadableException;import org.springframework.validation.BindException;import org.springframework.web.bind.MethodArgumentNotValidException;import org.springframework.web.bind.MissingServletRequestParameterException;import org.springframework.web.bind.annotation.ControllerAdvice;import org.springframework.web.bind.annotation.ExceptionHandler;import org.springframework.web.bind.annotation.ResponseBody;import org.springframework.web.bind.annotation.RestControllerAdvice;import javax.validation.ConstraintViolation;import javax.validation.ConstraintViolationException;import javax.validation.ValidationException;import java.util.ArrayList;import java.util.Set;/** * @author wzw * @date 2019-11-4 10:42 */@RestControllerAdvicepublic class MyExceptionHandle {    private Logger logger = LoggerFactory.getLogger(this.getClass());    @ResponseBody    @ExceptionHandler(MethodArgumentNotValidException.class)    public ResponseData handle(MethodArgumentNotValidException methodArgument){        logger.warn(methodArgument.getMessage());        return ResponseDataBuilder.fail(methodArgument.getBindingResult().getAllErrors().get(0).getDefaultMessage());    }    @ExceptionHandler(ConstraintViolationException.class)    public ResponseData handle2(ConstraintViolationException con){            String a = "";            Set<ConstraintViolation<?>> constraintViolations = con.getConstraintViolations();        ArrayList<ConstraintViolation<?>> list = new ArrayList<>(constraintViolations);        for (ConstraintViolation <?> c: list) {                if (c != null) {                    a += c.getMessage();                }            }        logger.warn(a);        return ResponseDataBuilder.fail(a);    }    /**     * get请求校验     * @param methodArgument     * @return     */    @ExceptionHandler(MissingServletRequestParameterException.class)    public ResponseData requestGet(MissingServletRequestParameterException methodArgument){        logger.error(methodArgument.getMessage());        return ResponseDataBuilder.fail(methodArgument.getParameterType()+ "类型的【" + methodArgument.getParameterName() + "】入参"+ "缺失");    }    /**     * post请求校验     * @param httpMessageNotReadableException     * @return     */    @ExceptionHandler(HttpMessageConversionException.class)    public ResponseData requestPost(HttpMessageConversionException httpMessageNotReadableException){        logger.error(httpMessageNotReadableException.getMessage());        return ResponseDataBuilder.fail(httpMessageNotReadableException.getMessage());    }    @ExceptionHandler(Exception.class)    public ResponseData handle(Exception e){        if (e instanceof MyBusinessException) {            MyBusinessException myBusinessException = (MyBusinessException)e;            logger.error(String.format("自定义异常【%】",myBusinessException.getMsg()),myBusinessException);            return ResponseDataBuilder.fail(myBusinessException.getMsg());        }        logger.error(e.getMessage(),e);        return ResponseDataBuilder.fail("未知异常");    }}
```

#### 3.结果集处理

```java
package com.wzw.store.responDataUtils;import lombok.Data;/** * 标准统一返回 * @author wzw * @date 2019-11-4 09:53 */@Datapublic class  ResponseData<T> {    private Integer code;    private String msg;    private T data;}
```

#### 4.结果处理工具

```java
package com.wzw.store.responDataUtils;/** * 统一返回工具类 * @author wzw * @date 2019-11-4 09:56 */public class ResponseDataBuilder {    /**     * 完全成功标识     */    private static final Integer SUCCESS_FLAG_CODE = 1;    /**     * 操作成功，结果失败     */    private static final Integer SUCCESS_FAIL_FLAG_CODE = 0;    /**     *失败标识     */    private static final Integer FAIL_FLAG_CODE = -1;    public static<T> ResponseData getSuccessResponseData() {        ResponseData<T> responseData = new ResponseData<>();        responseData.setCode(1);        responseData.setMsg("成功");        return responseData;    }    private static <T> ResponseData getSuccessAndFailResponseData() {        ResponseData<T> responseData = new ResponseData<>();        responseData.setCode(0);        return responseData;    }    private static <T> ResponseData getFailResponseData() {        ResponseData<T> responseData = new ResponseData<>();        responseData.setCode(-1);        return responseData;    }    public static<T> ResponseData success(T t){        ResponseData responseData = getSuccessResponseData();        responseData.setData(t);        return responseData;    }    public static ResponseData success(){        ResponseData responseData = getSuccessResponseData();        return responseData;    }    public static ResponseData successAndFail(String msg){        ResponseData successAndFailResponseData = getSuccessAndFailResponseData();        successAndFailResponseData.setMsg(msg);        return successAndFailResponseData;    }    public static ResponseData fail(String msg){        ResponseData failResponseData = getFailResponseData();        failResponseData.setMsg(msg);        return failResponseData;    }    public static ResponseData fail(Integer code, String msg) {        ResponseData<Object> responseData = new ResponseData<>();        responseData.setCode(code);        responseData.setMsg(msg);        return responseData;    }}
```

#### 5.自定义异常

```java
package com.wzw.store;import lombok.Data;/** * @author wzw * @date 2019-11-4 12:39 */@Datapublic class MyBusinessException extends RuntimeException{    private Integer code;    private String msg;    public MyBusinessException() {    }    public MyBusinessException(Integer code, String msg) {        this.code = code;        this.msg = msg;    }}
```

#### 6.自定义异常枚举

```java
package com.wzw.store;/** * @author wzw * @date 2019-11-4 12:40 */public enum ConstantEnum {    /**     * 成功标识 1，失败标识-1     */    SUCCESS(1,"成功"),    UNKNOW_ERROE(-1,"未知异常");    private Integer code;    private String msg;    ConstantEnum(Integer code, String msg) {        this.code = code;        this.msg = msg;    }    public Integer getCode() {        return code;    }    public String getMsg(){        return msg;    }    public String getMsg(Integer code) {        for (ConstantEnum constantEnum : ConstantEnum.values() ) {            if (constantEnum.getCode().equals(code)){                return constantEnum.getMsg();            }        }       return null;    }}
```

#### 7必要的pom文件

```xml
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
<dependency>    <groupId>org.aspectj</groupId>    <artifactId>aspectjrt</artifactId>    <version>1.8.13</version></dependency><dependency>    <groupId>org.aspectj</groupId>    <artifactId>aspectjweaver</artifactId>    <version>1.8.3</version></dependency>
```